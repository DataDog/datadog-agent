load("@rules_pkg//pkg:install.bzl", "pkg_install")
load("@rules_pkg//pkg:mappings.bzl", "pkg_filegroup")

package(default_visibility = ["//packaging:__subpackages__"])

pkg_filegroup(
    name = "etc",
    srcs = [
        "//deps/snmp_traps:etc",
    ],
)

pkg_filegroup(
    name = "embedded",
    srcs = [
        "//deps/gstatus:bin_files",
        "//deps/snmp_traps:etc",
    ] + select({
        "@platforms//os:linux": [
            "//deps/compile_policy:bin_files",
        ],
        "//conditions:default": [],
    }),
)

pkg_filegroup(
    name = "licenses",
    srcs = [
        "//compliance:license_copies",
        "//compliance:offer_copies",
        "//deps/gstatus:license_file",
    ] + select({
        "@platforms//os:linux": [
            "//deps/compile_policy:license_file",
        ],
        "//conditions:default": [],
    }),
)

pkg_install(
    name = "install",
    srcs = [
        ":embedded",
        ":etc",
        ":licenses",
    ],
)
