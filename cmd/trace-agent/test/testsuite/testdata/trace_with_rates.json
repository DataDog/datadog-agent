[
  {
    "metrics": {
      "_dd1.sr.eausr": 1.0,
      "_sampling_priority_v1": 2
    },
    "meta": {
      "http.url": "http://localhost:8080/coffeehouse",
      "language": "jvm",
      "peer.port": "8080",
      "thread.name": "http-nio-8080-exec-1",
      "span.origin.type": "org.apache.catalina.core.ApplicationFilterChain",
      "http.status_code": "200",
      "component": "java-web-servlet",
      "span.kind": "server",
      "runtime-id": "b5d0413b-8e8b-480d-8f25-01d233365cef",
      "peer.hostname": "localhost",
      "customer_id": "58325",
      "http.method": "GET",
      "thread.id": "37"
    },
    "error": 0,
    "type": "web",
    "duration": 4042369100,
    "service": "coffee-house",
    "resource": "GET /coffeehouse",
    "name": "servlet.request",
    "trace_id": 2355066554236543438,
    "span_id": 6236799350000994985,
    "start": 1552905964954046600,
    "parent_id": 0
  },
  {
    "metrics": {
      "_dd1.sr.eausr": 1.0
    },
    "meta": {
      "component": "spring-web-controller",
      "span.kind": "server",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": "web",
    "duration": 3619003500,
    "service": "coffee-house",
    "resource": "CoffeeHouse.coffeeHouseIndex",
    "name": "CoffeeHouse.coffeeHouseIndex",
    "trace_id": 2355066554236543438,
    "span_id": 8841855162363500291,
    "start": 1552905965084970400,
    "parent_id": 6236799350000994985
  },
  {
    "metrics": {},
    "meta": {
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": null,
    "duration": 42355400,
    "service": "coffee-house",
    "resource": "RecordOrder",
    "name": "RecordOrder",
    "trace_id": 2355066554236543438,
    "span_id": 5525823589379557046,
    "start": 1552905968593508700,
    "parent_id": 8651765567612207184
  },
  {
    "metrics": {},
    "meta": {
      "custom.user.name": "Charles",
      "custom.user.group": "pleb",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": null,
    "duration": 3450254500,
    "service": "coffee-house",
    "resource": "OpenTracingBrewInfo",
    "name": "OpenTracingBrewInfo",
    "trace_id": 2355066554236543438,
    "span_id": 8651765567612207184,
    "start": 1552905965177195400,
    "parent_id": 8841855162363500291
  },
  {
    "metrics": {},
    "meta": {
      "component": "trace",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": null,
    "duration": 30708800,
    "service": "coffee-house",
    "resource": "CoffeeHouse.prepareOrder",
    "name": "CoffeeHouse.prepareOrder",
    "trace_id": 2355066554236543438,
    "span_id": 8902675585574338048,
    "start": 1552905968594882800,
    "parent_id": 8651765567612207184
  },
  {
    "metrics": {},
    "meta": {
      "component": "trace",
      "error.type": "java.lang.InterruptedException",
      "error.msg": "Thread interrupted for external calls timeout.",
      "error.stack": "java.lang.InterruptedException: Thread interrupted for external calls timeout.\n\tat com.datadog.example.demo.CoffeeHouse.getOrder(CoffeeHouse.java:232)\n\tat com.datadog.example.demo.CoffeeHouse.coffeeHouseIndexImpl(CoffeeHouse.java:163)\n\tat com.datadog.example.demo.CoffeeHouse.coffeeHouseIndex(CoffeeHouse.java:82)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:133)\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:97)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:967)\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:901)\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:635)\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.web.filter.ApplicationContextHeaderFilter.doFilterInternal(ApplicationContextHeaderFilter.java:55)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:110)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:108)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:106)\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198)\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:478)\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:80)\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87)\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:799)\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66)\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1457)\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\tat java.lang.Thread.run(Thread.java:748)\n",
      "thread.name": "http-nio-8080-exec-1",
      "error": "true",
      "thread.id": "37"
    },
    "error": 1,
    "type": null,
    "duration": 3155553800,
    "service": "coffee-house",
    "resource": "CoffeeHouse.getOrder",
    "name": "CoffeeHouse.getOrder",
    "trace_id": 2355066554236543438,
    "span_id": 4403708881450641582,
    "start": 1552905965437783800,
    "parent_id": 8651765567612207184
  },
  {
    "metrics": {
      "_dd1.sr.eausr": 1.0
    },
    "meta": {
      "db.instance": "demo",
      "db.type": "mongo",
      "component": "java-mongo",
      "span.kind": "client",
      "db.statement": "{ \"$eval\" : \"?\", \"find\" : { \"group\" : \"?\" } }",
      "peer.hostname": "mongo",
      "thread.name": "http-nio-8080-exec-1",
      "peer.port": "27017",
      "thread.id": "37",
      "peer.ipv4": "172.30.0.3"
    },
    "error": 0,
    "type": "mongodb",
    "duration": 42429500,
    "service": "mongo",
    "resource": "{ \"$eval\" : \"?\", \"find\" : { \"group\" : \"?\" } }",
    "name": "mongo.query",
    "trace_id": 2355066554236543438,
    "span_id": 6171849889814615308,
    "start": 1552905968550688100,
    "parent_id": 4403708881450641582
  },
  {
    "metrics": {},
    "meta": {
      "http.status_code": "200",
      "component": "apache-httpclient",
      "span.kind": "client",
      "http.url": "http://java-coffeehouse-beanserver:8080/beanserver",
      "peer.hostname": "java-coffeehouse-beanserver",
      "thread.name": "http-nio-8080-exec-1",
      "peer.port": "8080",
      "http.method": "GET",
      "thread.id": "37"
    },
    "error": 0,
    "type": "http",
    "duration": 977790500,
    "service": "coffee-house",
    "resource": "GET /beanserver",
    "name": "http.request",
    "trace_id": 2355066554236543438,
    "span_id": 2725219402051222941,
    "start": 1552905967571408400,
    "parent_id": 4403708881450641582
  },
  {
    "metrics": {},
    "meta": {
      "http.status_code": "200",
      "component": "apache-httpclient",
      "span.kind": "client",
      "http.url": "http://php-coffeehouse-frontend/coffees",
      "peer.hostname": "php-coffeehouse-frontend",
      "thread.name": "pool-5-thread-1",
      "peer.port": "-1",
      "http.method": "GET",
      "thread.id": "53"
    },
    "error": 0,
    "type": "http",
    "duration": 980084700,
    "service": "coffee-house",
    "resource": "GET /coffees",
    "name": "http.request",
    "trace_id": 2355066554236543438,
    "span_id": 8709968745838557365,
    "start": 1552905966288159400,
    "parent_id": 4403708881450641582
  },
  {
    "metrics": {},
    "meta": {
      "component": "trace",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": null,
    "duration": 5519200,
    "service": "coffee-house",
    "resource": "CoffeeHouse.authorize",
    "name": "CoffeeHouse.authorize",
    "trace_id": 2355066554236543438,
    "span_id": 8881214472942135291,
    "start": 1552905965431412300,
    "parent_id": 8651765567612207184
  },
  {
    "metrics": {},
    "meta": {
      "component": "trace",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": null,
    "duration": 15862500,
    "service": "coffee-house",
    "resource": "CoffeeHouse.authenticate",
    "name": "CoffeeHouse.authenticate",
    "trace_id": 2355066554236543438,
    "span_id": 4713446213003727013,
    "start": 1552905965402123500,
    "parent_id": 8651765567612207184
  },
  {
    "metrics": {},
    "meta": {
      "component": "trace",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37"
    },
    "error": 0,
    "type": null,
    "duration": 215875900,
    "service": "coffee-house",
    "resource": "CoffeeHouse.getRandomUser",
    "name": "CoffeeHouse.getRandomUser",
    "trace_id": 2355066554236543438,
    "span_id": 1493540544329576087,
    "start": 1552905965185351500,
    "parent_id": 8651765567612207184
  },
  {
    "metrics": {
      "_dd1.sr.eausr": 0.5
    },
    "meta": {
      "db.instance": "jdbc:h2:mem:testdb",
      "db.type": "h2",
      "component": "java-jdbc-prepared_statement",
      "db.user": "SA",
      "span.kind": "client",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37",
      "span.origin.type": "org.h2.jdbc.JdbcPreparedStatement"
    },
    "error": 0,
    "type": "sql",
    "duration": 14079300,
    "service": "h2",
    "resource": "SELECT * from user ORDER BY RAND() LIMIT 1 ; select MY_SLEEP(10) from dual",
    "name": "h2.query",
    "trace_id": 2355066554236543438,
    "span_id": 725058920546729856,
    "start": 1552905965312649400,
    "parent_id": 1493540544329576087
  },
  {
    "metrics": {
      "_dd1.sr.eausr": 0.5
    },
    "meta": {
      "db.instance": "jdbc:h2:mem:testdb",
      "db.type": "h2",
      "component": "java-jdbc-statement",
      "db.user": "SA",
      "span.kind": "client",
      "thread.name": "http-nio-8080-exec-1",
      "thread.id": "37",
      "span.origin.type": "org.h2.jdbc.JdbcStatement"
    },
    "error": 0,
    "type": "sql",
    "duration": 836400,
    "service": "h2",
    "resource": "SELECT 1",
    "name": "h2.query",
    "trace_id": 2355066554236543438,
    "span_id": 2101098015382740582,
    "start": 1552905965293502900,
    "parent_id": 1493540544329576087
  }
]