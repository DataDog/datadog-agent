init_config:
instances:
  - expvar_url: http://localhost:5000/debug/vars
    tags:
      - check_type:python
    metrics:
      - path: memstats/PauseTotalNs
        alias: go_expvar.gc.pause_time_in_ns
        type: rate                  # default is a gauge
      - path: memstats/Alloc        # will be reported as go_expvar.memstats.alloc
      - path: points_processed
        type: rate

      # forwarder monitoring
      - path: forwarder/TransactionsCreated/Timeseries
        type: rate
      - path: forwarder/TransactionsCreated/Event
        type: rate
      - path: forwarder/TransactionsCreated/CheckRuns
        type: rate
      - path: forwarder/TransactionsCreated/HostMetadata
        type: rate
      - path: forwarder/TransactionsCreated/Metadata
        type: rate
      - path: forwarder/TransactionsCreated/TimeseriesV1
        type: rate
      - path: forwarder/TransactionsCreated/CheckRunsV1
        type: rate
      - path: forwarder/TransactionsCreated/IntakeV1
        type: rate
      - path: forwarder/TransactionsCreated/RetryQueueSize
        type: rate
      - path: forwarder/TransactionsCreated/Requeued
        type: rate
      - path: forwarder/TransactionsCreated/Errors
        type: rate
      - path: forwarder/TransactionsCreated/Dropped
        type: rate
      - path: forwarder/TransactionsCreated/Success
        type: rate

      # dogstatsd monitoring
      - path: dogstatsd/PacketReadingErrors
        type: rate
      - path: dogstatsd/ServiceCheckParseErrors
        type: rate
      - path: dogstatsd/ServiceCheckPackets
        type: rate
      - path: dogstatsd/EventParseErrors
        type: rate
      - path: dogstatsd/EventPackets
        type: rate
      - path: dogstatsd/MetricParseErrors
        type: rate
      - path: dogstatsd/MetricPackets
        type: rate

      # aggregator monitoring
      - path: aggregator/Flush/ChecksMetricSampleFlushTime/LastFlushTime
        type: gauge
      - path: aggregator/Flush/ServiceCheckFlushTime/LastFlushTime
        type: gauge
      - path: aggregator/Flush/EventFlushTime/LastFlushTime
        type: gauge
      - path: aggregator/Flush/MainFlushTime/LastFlushTime
        type: gauge
      - path: aggregator/SeriesFlushed
        type: rate
      - path: aggregator/ServiceCheckFlushed
        type: rate
      - path: aggregator/EventsFlushed
        type: rate
      - path: aggregator/NumberOfFlush
        type: rate
      - path: aggregator/DogstatsdMetricSample
        type: rate
      - path: aggregator/ChecksMetricSample
        type: rate
      - path: aggregator/ServiceCheck
        type: rate
      - path: aggregator/Event
        type: rate
      - path: aggregator/HostnameUpdate
        type: rate

      # scheduler monitoring
      - path: scheduler/ChecksEntered
        type: gauge
      - path: scheduler/Queues/.*/Size
        type: gauge
        alias: scheduler.queues.size
      - path: scheduler/Queues/.*/Interval
        type: gauge
        alias: scheduler.queues.interval
      - path: scheduler/QueuesCount
        type: gauge
