services:
  oracle:
    platform: linux/amd64
    image: "registry.ddbuild.io/images/mirror/oracle:${DBMS_VERSION:-21.3.0-xe}"
    ports:
      - "1521:1521"
    healthcheck:
      test: "echo 'select 123456789;' | sqlplus -s sys/datad0g@localhost as sysdba | grep 123456789"
      interval: 5s
      start_period: 15s
      timeout: 5s
      retries: 24
    volumes:
      - ./initdb.d:/docker-entrypoint-initdb.d/startup
    environment:
      ORACLE_PWD: datad0g
    # command: "echo 'select 1 from dual;' | sqlplus -s sys/datad0g@localhost"
    # command: [ "bash", "-c", "echo 'select 1 from dual;' | sqlplus -s sys/datad0g@localhost"]
