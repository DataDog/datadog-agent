binary: simple
probes:
- id: intArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.intArg
- id: stringArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringArg
  template: "s: {s}"
  segments:
    - str: "s: "
    - json:
        ref: "s"
      dsl: "s"
- id: intSliceArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.intSliceArg
- id: intArrayArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.intArrayArg
- id: stringSliceArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringSliceArg
- id: stringArrayArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringArrayArg
- id: intArrayArgFrameless
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringArrayArgFrameless
- id: inlined
  type: LOG_PROBE
  captureSnapshot: true
  sampling:
    # Gets called twice, so we should get 2 snapshots.
    snapshotsPerSecond: 2
  where:
    methodName: main.inlined
- id: mapArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.mapArg
  template: "m: {m}"
  segments:
    - str: "m: "
    - json:
        ref: "m"
      dsl: "m"
- id: bigMapArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.bigMapArg
  template: "m: {m}"
  segments:
    - str: "m: "
    - json:
        ref: "m"
      dsl: "m"
- id: PointerChainArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.PointerChainArg
  capture:
    maxReferenceDepth: 3
  template: "ptr: {ptr}"
  segments:
    - str: "ptr: "
    - json:
        ref: "ptr"
      dsl: "ptr"
- id: PointerSmallChainArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.PointerSmallChainArg
  capture:
    maxReferenceDepth: 5
- id: noArgs
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.noArgs
- id: usesMapsOfMapsThatDoNotAppearAsArguments
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.usesMapsOfMapsThatDoNotAppearAsArguments
- id: logProbe_no_snapshot_stringArg
  type: LOG_PROBE
  where:
    methodName: main.stringArg
  template: "s: {s}"
  segments:
    - str: "s: "
    - json:
        ref: "s"
      dsl: "s"
- id: logProbe_no_snapshot_stringArg_bad_template
  type: LOG_PROBE
  where:
    methodName: main.stringArg
  template: "x: {x}"
  segments:
    - str: "x: "
    - json:
        ref: "x"
      dsl: "x"
- id: spanProbe
  type: SPAN_PROBE
  where:
    methodName: main.usesMapsOfMapsThatDoNotAppearAsArguments
  evaluateAt: "exit"
  tags:
  - "issue:UnsupportedFeature"
