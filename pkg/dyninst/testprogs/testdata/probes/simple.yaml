binary: simple
probes:
- id: intArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.intArg
- id: stringArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringArg
- id: intSliceArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.intSliceArg
- id: intArrayArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.intArrayArg
- id: stringSliceArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringSliceArg
- id: stringArrayArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringArrayArg
- id: intArrayArgFrameless
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.stringArrayArgFrameless
- id: inlined
  type: LOG_PROBE
  captureSnapshot: true
  sampling:
    # Gets called twice, so we should get 2 snapshots.
    snapshotsPerSecond: 2
  where:
    methodName: main.inlined
- id: mapArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.mapArg
- id: bigMapArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.bigMapArg
- id: PointerChainArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.PointerChainArg
  capture:
    maxReferenceDepth: 3
- id: PointerSmallChainArg
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.PointerSmallChainArg
  capture:
    maxReferenceDepth: 5
- id: noArgs
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.noArgs
- id: usesMapsOfMapsThatDoNotAppearAsArguments
  type: LOG_PROBE
  captureSnapshot: true
  where:
    methodName: main.usesMapsOfMapsThatDoNotAppearAsArguments
- id: testTemplateStringSegment
  type: LOG_PROBE
  tags:
    - "foo:bar"
  where:
    methodName: main.stringArg
  captureSnapshot: true
  message: "hello"
  segments:
    - str: "hello"
- id: testTemplateMultipleStringSegments
  type: LOG_PROBE
  tags:
    - "foo:bar"
  where:
    methodName: main.stringArg
  captureSnapshot: true
  message: "hello world!"
  segments:
    - str: "hello "
    - str: "world"
    - str: "!"
- id: testTemplateStringAndDSLSegment
  type: LOG_PROBE
  tags:
    - "foo:bar"
  where:
    methodName: main.stringArg
  captureSnapshot: true
  message: "hello {s}"
  segments:
    - str: "hello "
    - dsl: "s"
      json:
        ref: "s"
- id: testTemplateMultipleDSLSegment
  type: LOG_PROBE
  tags:
    - "foo:bar"
  where:
    methodName: main.stringArg
  captureSnapshot: true
  message: "{s}{s}"
  segments:
    - dsl: "s"
      json:
        ref: "s"
    - dsl: "s"
      json:
        ref: "s"
- id: testTemplateDSLAndStringSegments
  type: LOG_PROBE
  tags:
    - "foo:bar"
  where:
    methodName: main.stringArg
  captureSnapshot: true
  message: "hello {s}, and hello to {s}"
  segments:
    - str: "hello "
    - dsl: "s"
      json:
        ref: "s"
    - str: ", and hello to "
    - dsl: "s"
      json:
        ref: "s"