# Dockerfile for testing Node.js with apt-installed nodejs (uses libnode.so)
# This reproduces the Ubuntu package manager installation where SSL symbols
# are bundled in libnode.so rather than imported from system libssl.so.
#
# Ubuntu 22.04 with nodejs package has SSL symbols defined in libnode.so.72

FROM public.ecr.aws/ubuntu/ubuntu:22.04

# Install nodejs from Ubuntu packages (SSL bundled in libnode.so)
RUN apt-get update && \
    apt-get install -y nodejs && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

# The server.js will be mounted at runtime
CMD ["node", "/v/server.js"]
