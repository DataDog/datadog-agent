<html>
	<head>
		<title>{{ title }}</title>
	</head>
	<style>
		.complexity-level-low {
			background-color: #00FF00;
		}
		.complexity-level-medium {
			background-color: #FFFF00;
		}
		.complexity-level-high {
			background-color: #FF0000;
		}
		.complexity-level-extreme {
			background-color: #FF0000;
		}
		.complexity-level-none {
			background-color: #FFFFFF;
		}
	</style>
	<body>
		<h1>{{ title }}</h1>

		{% for filename, contents in file_contents.items() %}
		<h2>{{ filename }}</h2>
		<table>
			{% for line in contents %}
			<tr class="complexity-level-{{ line.complexity_level }}">
				<td>{{ loop.index }}</td>
				<td>
				{%- if line.complexity -%}
					{{ line.complexity.num_instructions }}
				{%- endif -%}
				</td>
				<td><pre>{{ line.line }}</pre></td>
				{% if line.complexity %}
					{% for asm_idx in line.complexity.assembly_insns | sort %}
						{% set asm = complexity_data.insn_map[asm_idx | string] %}
						<tr>
							<td>{{ asm.index }}</td>
							<td>{{ asm.times_processed }}</td>
							<td><pre>{{ asm.code }}</pre></td>
						<tr>
					{% endfor %}
				{% endif %}
			</tr>
			{% endfor %}
		</table>
		{% endfor %}
</html>
