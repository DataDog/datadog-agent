load("@rules_license//rules:license.bzl", "license")
load("@rules_cc//cc:cc_library.bzl", "cc_library")
load("@rules_cc//cc:cc_shared_library.bzl", "cc_shared_library")

package(
    default_package_metadata = [":license"],
    default_visibility = ["//packages:__subpackages__"]
)

license(
    name = "license",
    license_kinds = ["@rules_license//licenses/spdx:MIT"],
    license_text = "license_file",
    copyright_notice = "Copyright © 1994–2025 Lua.org, PUC-Rio.",
    visibility = ["//visibility:public"],
)

cc_library(
    name = "liblua",
    srcs = glob(["src/*.c", "src/*.h"], exclude = [
        "src/lua.c",
        "src/luac.c",
    ]),
    hdrs = [
        "src/lauxlib.h",
        "src/lua.h",
        "src/lua.hpp",
        "src/luaconf.h",
        "src/lualib.h",
    ],
    visibility = ["//visibility:public"],
    strip_include_prefix = "src",
)
