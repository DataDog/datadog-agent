---
# Windows bazel jobs extracted from .gitlab/build/bazel/tests.yml and build-deps.yml

bazel:build-deps:windows-amd64:
  extends: [ .bazel:build-deps, .bazel:runner:windows-amd64 ]
  variables:
    POWERSHELL_SCRIPT: |-
      [Console]::WriteLine("ðŸŸ¡ TODO(regis): compilation errors remain - limiting to a working subset for the time being")
      bazel build '@zlib//...' '@libffi//:ffi' '@xz//...' '@cpython//...' '@openssl//...' --platforms=//bazel/platforms:windows_x86_64
      # bazel build @bzip2//...

bazel:tests:windows-amd64:
  extends: [ .bazel:tests, .bazel:runner:windows-amd64 ]
  variables:
    POWERSHELL_SCRIPT: |-
      bazel test //bazel/tests/...
