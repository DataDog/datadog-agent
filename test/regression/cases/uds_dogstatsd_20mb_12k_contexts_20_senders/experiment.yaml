optimization_goal: memory
erratic: false

target:
  name: datadog-agent
  cpu_allotment: 8
  memory_allotment: 1g

  environment:
    DD_TELEMETRY_ENABLED: true
    DD_DOGSTATSD_STATS_PORT: 5000
    DD_API_KEY: a0000001
    DD_HOSTNAME: smp-regression
    DD_DD_URL: http://127.0.0.1:9092

    DD_AUTH_TOKEN_FILE_PATH: "/tmp/agent-auth-token"
    DD_CONFD_PATH: "/etc/datadog-agent/conf.d"
    DD_CLOUD_PROVIDER_METADATA: "[]"
    DD_COLLECT_GCE_TAGS: false
    DD_DOGSTATSD_STREAM_SOCKET: "/tmp/dsd.socket"
    DD_DOGSTATSD_ORIGIN_DETECTION: false
    DD_DOGSTATSD_NO_AGGREGATION_PIPELINE: false

  profiling_environment:
    DD_INTERNAL_PROFILING_BLOCK_PROFILE_RATE: 10000
    DD_INTERNAL_PROFILING_CPU_DURATION: 1m
    DD_INTERNAL_PROFILING_DELTA_PROFILES: true
    DD_INTERNAL_PROFILING_ENABLED: true
    DD_INTERNAL_PROFILING_ENABLE_GOROUTINE_STACKTRACES: true
    DD_INTERNAL_PROFILING_MUTEX_PROFILE_FRACTION: 10
    DD_INTERNAL_PROFILING_PERIOD: 1m
    DD_INTERNAL_PROFILING_UNIX_SOCKET: /smp-host/apm.socket
    DD_PROFILING_EXECUTION_TRACE_ENABLED: true
    DD_PROFILING_EXECUTION_TRACE_PERIOD: 1m
    DD_PROFILING_WAIT_PROFILE: true
