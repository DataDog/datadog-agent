# Define the HTTP port to listen on
http_port 3128

# Access control lists (ACLs)
acl mirror urlpath_regex ^/mirror/

# Deny all requests by default
http_access deny all

# Allow access to the allowed paths
http_access allow mirror

# URL rewrite to redirect /mirror/<path> to install.datadoghq.com/<path>
url_rewrite_program /opt/fixtures/mirror_url_rewrite.sh
url_rewrite_extras space

# Caching configuration
cache_dir ufs /var/spool/squid 1000 16 256
cache_mem 256 MB
maximum_object_size_in_memory 512 KB
maximum_object_size 10 MB
cache_replacement_policy lru
