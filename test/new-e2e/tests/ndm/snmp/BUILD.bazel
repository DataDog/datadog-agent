load("@rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "snmp",
    srcs = ["common.go"],
    importpath = "github.com/DataDog/datadog-agent/test/new-e2e/tests/ndm/snmp",
    visibility = ["//visibility:public"],
    deps = [
        "//test/e2e-framework/testing/components",
        "//test/fakeintake/aggregator",
        "@com_github_stretchr_testify//assert",
        "@com_github_stretchr_testify//require",
    ],
)

go_test(
    name = "snmp_test",
    srcs = [
        "autodiscovery_test.go",
        "snmp_test.go",
        "snmp_vm_test.go",
    ],
    embed = [":snmp"],
    embedsrcs = [
        "compose/data/apc_ups.snmprec",
        "compose/data/args_list.txt",
        "compose/data/arista.snmprec",
        "compose/data/aruba-access-point.snmprec",
        "compose/data/aruba-switch.snmprec",
        "compose/data/aruba.snmprec",
        "compose/data/chatsworth_pdu.snmprec",
        "compose/data/checkpoint-firewall.snmprec",
        "compose/data/cisco-asa-5525.snmprec",
        "compose/data/cisco-asa.snmprec",
        "compose/data/cisco-catalyst.snmprec",
        "compose/data/cisco-csr1000v.snmprec",
        "compose/data/cisco-nexus.snmprec",
        "compose/data/cisco_icm.snmprec",
        "compose/data/constraint.snmprec",
        "compose/data/dell-poweredge.snmprec",
        "compose/data/dummy.snmprec",
        "compose/data/entity.snmprec",
        "compose/data/f5-big-ip.snmprec",
        "compose/data/fortinet-fortigate.snmprec",
        "compose/data/generic-router.snmprec",
        "compose/data/generic_host.snmprec",
        "compose/data/hp-ilo4.snmprec",
        "compose/data/hpe-proliant.snmprec",
        "compose/data/idrac.snmprec",
        "compose/data/if.snmprec",
        "compose/data/isilon.snmprec",
        "compose/data/juniper-ex-variation.snmprec",
        "compose/data/juniper-ex.snmprec",
        "compose/data/juniper-mx-variation.snmprec",
        "compose/data/juniper-mx.snmprec",
        "compose/data/juniper-srx-variation.snmprec",
        "compose/data/juniper-srx.snmprec",
        "compose/data/meraki-cloud-controller.snmprec",
        "compose/data/netapp.snmprec",
        "compose/data/palo-alto.snmprec",
        "compose/data/public.snmprec",
        "compose/data/public_delay.snmprec",
        "compose/snmpCompose.yaml",
        "config-vm/cisco-nexus.yaml",
        "config/cisco-nexus.yaml",
    ],
    deps = [
        "//test/e2e-framework/common/utils",
        "//test/e2e-framework/components/datadog/agent",
        "//test/e2e-framework/components/datadog/agentparams",
        "//test/e2e-framework/components/datadog/dockeragentparams",
        "//test/e2e-framework/components/docker",
        "//test/e2e-framework/components/os",
        "//test/e2e-framework/resources/aws",
        "//test/e2e-framework/scenarios/aws/ec2",
        "//test/e2e-framework/scenarios/aws/fakeintake",
        "//test/e2e-framework/testing/e2e",
        "//test/e2e-framework/testing/environments",
        "//test/e2e-framework/testing/provisioners",
        "//test/e2e-framework/testing/provisioners/aws/host",
        "//test/e2e-framework/testing/utils/e2e/client/agentclient",
        "//test/fakeintake/aggregator",
        "//test/new-e2e/tests/agent-configuration/secretsutils",
        "@com_github_pulumi_pulumi_sdk_v3//go/pulumi",
        "@com_github_stretchr_testify//assert",
        "@com_github_stretchr_testify//require",
    ],
)
