load("@rules_python//python:py_binary.bzl", "py_binary")
load("//compliance:license_csv.bzl", "license_csv")

package(default_visibility = ["//visibility:public"])

py_binary(
    name = "gather_licenses",
    srcs = ["gather_licenses.py"],
    visibility = ["//visibility:private"],
    deps = ["//tasks:licenses"],
)

# Gather the licenses for dependencies that not built by omnibus any more.
# The target is a temporary hack. In the future, it should becomg //pkg:agent.
license_csv(
    name = "licenses",
    out = "licenses.csv",
    tags = ["manual"],
    target = "//deps:all_deps",
)
