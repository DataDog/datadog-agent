exporters:
    otlphttp:
        headers:
            dd-api-key: test-api-key
processors:
    filter/dd-hp-drop-internal:
        metrics:
            exclude:
                match_type: regexp
                metric_names:
                    - ^scrape_.*$
                    - ^up$
                    - ^promhttp_metric_handler_errors_total$
    resource/dd-profiler-internal-metadata:
        attributes:
            - action: upsert
              key: profiler_name
              value: full-host-profiler
            - action: upsert
              key: profiler_version
              value: 7.0.0-test
    resourcedetection/default:
        detectors:
            - system
        system:
            resource_attributes:
                host.arch:
                    enabled: true
                host.name:
                    enabled: false
                os.type:
                    enabled: false
receivers:
    hostprofiler:
        symbol_uploader:
            enabled: false
    otlp:
        protocols:
            grpc:
                endpoint: 0.0.0.0:4317
    prometheus/dd-hp-internal:
        config:
            scrape_configs:
                - fallback_scrape_protocol: PrometheusText0.0.4
                  job_name: host-profiler-internal
                  metric_name_escaping_scheme: underscores
                  metric_name_validation_scheme: legacy
                  scrape_interval: 60s
                  scrape_protocols:
                    - PrometheusText0.0.4
                  static_configs:
                    - targets:
                        - 0.0.0.0:8888
service:
    pipelines:
        metrics:
            processors: []
        profiles:
            exporters:
                - otlphttp
            processors:
                - resourcedetection/default
                - resource/dd-profiler-internal-metadata
            receivers:
                - hostprofiler
