receivers:
  hostprofiler:
    symbol_uploader:
      enabled: false
  prometheus:
    config:
      scrape_configs:
        - job_name: 'test'

processors:
  infraattributes/custom:
    allow_hostname_override: false
  batch:
    timeout: 10s

exporters:
  otlphttp/prod:
    profiles_endpoint: https://intake.profile.datadoghq.com/v1development/profiles
    metrics_endpoint: https://otlp.datadoghq.com/v1/metrics
    headers:
      dd-api-key: "test_key_123"
  otlphttp/metrics-only:
    metrics_endpoint: https://otlp.datadoghq.com/v1/metrics
    headers:
      dd-api-key: "metrics_key_456"

service:
  pipelines:
    profiles:
      receivers:
        - hostprofiler
      processors:
        - infraattributes/custom
      exporters:
        - otlphttp/prod
    metrics:
      receivers:
        - prometheus
      processors:
        - batch
      exporters:
        - otlphttp/metrics-only
