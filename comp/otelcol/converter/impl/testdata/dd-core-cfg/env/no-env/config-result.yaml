receivers:
  otlp:
  prometheus/user-defined:
    config:
      scrape_configs:
        - job_name: 'datadog-agent'
          scrape_interval: 60s
          metric_name_validation_scheme: legacy
          metric_name_escaping_scheme: underscores
          static_configs:
            - targets: ['0.0.0.0:8888']

processors:
  infraattributes/user-defined:

exporters:
  nop:

extensions:
  pprof/user-defined:
  health_check/user-defined:
  zpages/user-defined:
    endpoint: "localhost:55679"
  ddflare/user-defined:
  ddprofiling:
    profiler_options:
      service: test_svc
      env: test_env
    
service:
  extensions: [pprof/user-defined, zpages/user-defined, health_check/user-defined, ddflare/user-defined, ddprofiling]
  pipelines:
    traces:
      receivers: [otlp]
      processors: [infraattributes/user-defined]
      exporters: [nop]
    metrics:
      receivers: [prometheus/user-defined]
      processors: [infraattributes/user-defined]
      exporters: [nop]
    logs:
      receivers: [otlp]
      processors: [infraattributes/user-defined]
      exporters: [nop]
