load("@rules_go//go:def.bzl", "go_library")

go_library(
    name = "dockerpermissions",
    srcs = [
        "check.go",
        "check_noop.go",
        "issue.go",
        "module.go",
    ],
    embedsrcs = [
        "Fix-DockerLogPermissions.ps1",
        "fix-docker-log-permissions.sh",
    ],
    importpath = "github.com/DataDog/datadog-agent/comp/healthplatform/impl/issues/dockerpermissions",
    visibility = ["//visibility:public"],
    deps = [
        "//comp/healthplatform/impl/issues",
        "//pkg/template/text",
        "@com_github_datadog_agent_payload_v5//healthplatform",
        "@org_golang_google_protobuf//types/known/structpb",
    ] + select({
        "@rules_go//go/platform:android": [
            "//pkg/util/system/socket",
        ],
        "@rules_go//go/platform:linux": [
            "//pkg/util/system/socket",
        ],
        "@rules_go//go/platform:windows": [
            "//pkg/util/system/socket",
        ],
        "//conditions:default": [],
    }),
)
