Custom Metrics Provider
=======================
  {{- if .hpaExternal -}}
  {{- if .hpaExternal.Error }}
  Error while trying to list external metrics: {{ .hpaExternal.Error }}
  {{ else }}
  ConfigMap name: {{ .hpaExternal.ConfigMapName }}

  Detected Metrics
  ----------------
    {{- if .hpaExternal.Descriptors.ErrorStore }}
    Internal Error while processing descriptors: {{ .hpaExternal.Descriptors.ErrorStore }}
    {{ else }}
    Number of descriptors detected: {{ .hpaExternal.Descriptors.Number }}
    {{- end -}}

    Pods Metrics
    ------------
    {{ range $metric := .hpaExternal.Descriptors.Pods }}
    {{ range $name, $value := $metric}}
    {{- if (eq $name "hpaRef")}}
    {{$name}}:
    {{- range $k, $v := $value}}
    - {{$k}}: {{$v}}
    {{- end -}}
    {{else}}
    {{$name}}: {{$value}}
    {{- end -}}
    {{- end -}}
    {{- end }}

    Object Metrics
    --------------
    {{ range $metric := .hpaExternal.Descriptors.Object }}
    {{ range $name, $value := $metric}}
    {{- if (eq $name "hpaRef")}}
    {{$name}}:
    {{- range $k, $v := $value}}
    - {{$k}}: {{$v}}
    {{- end -}}
    {{else}}
    {{$name}}: {{$value}}
    {{- end -}}
    {{- end -}}
    {{- end }}

  External Metrics
  ----------------
    {{- if .hpaExternal.External.ErrorStore }}
    Internal Error while processing the External Metrics: {{ .hpaExternal.External.ErrorStore }}
    {{ else }}
    Number of external metrics detected: {{ .hpaExternal.External.Number }}
    {{- end -}}
    {{ range $metric := .hpaExternal.External.Metrics }}
    {{ range $name, $value := $metric}}
    {{- if (eq $name "hpaRef")}}
    {{$name}}:
    {{- range $k, $v := $value}}
    - {{$k}}: {{$v}}
    {{- end -}}
    {{else}}
    {{$name}}: {{$value}}
    {{- end -}}
    {{- end -}}
    {{- end }}
  {{- end -}}
  {{ else }}
  The Custom Metrics Provider is not enabled.
  {{ end }}
